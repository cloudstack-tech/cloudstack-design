# ğŸš€ è‡ªåŠ¨åŒ–å‘å¸ƒæŒ‡å—

æœ¬é¡¹ç›®å·²é…ç½®è‡ªåŠ¨åŒ– GitHub Release å’Œ npm å‘å¸ƒæµç¨‹ã€‚å½“ç‰ˆæœ¬å·å‘ç”Ÿå˜åŒ–å¹¶æ¨é€åˆ°`main`åˆ†æ”¯æ—¶ï¼Œå°†è‡ªåŠ¨åˆ›å»º GitHub Releaseã€‚

## ğŸ“‹ å·¥ä½œæµç¨‹æ¦‚è¿°

```mermaid
graph LR
    A[ä¿®æ”¹ä»£ç ] --> B[æ›´æ–°ç‰ˆæœ¬å·]
    B --> C[æ¨é€åˆ°mainåˆ†æ”¯]
    C --> D[GitHub Actionsæ£€æµ‹ç‰ˆæœ¬å˜åŒ–]
    D --> E[è‡ªåŠ¨åˆ›å»ºGitHub Release]
    E --> F{åŒ…å« [publish-npm] ?}
    F -->|æ˜¯| G[åŒæ—¶å‘å¸ƒåˆ°npm]
    F -->|å¦| H[ä»…åˆ›å»ºGitHub Release]
```

## ğŸ¯ å‘å¸ƒç±»å‹

### 1. ä»… GitHub Releaseï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** æ—¥å¸¸å¼€å‘ï¼ŒåŠŸèƒ½æ›´æ–°ï¼Œä¿®å¤ bug

```bash
# è¡¥ä¸ç‰ˆæœ¬ (0.1.0 â†’ 0.1.1) - ä¿®å¤bug
pnpm run release:patch

# æ¬¡è¦ç‰ˆæœ¬ (0.1.0 â†’ 0.2.0) - æ–°å¢åŠŸèƒ½
pnpm run release:minor

# ä¸»è¦ç‰ˆæœ¬ (0.1.0 â†’ 1.0.0) - é‡å¤§å˜æ›´
pnpm run release:major
```

### 2. GitHub Release + npm å‘å¸ƒ

**é€‚ç”¨åœºæ™¯ï¼š** æ­£å¼ç‰ˆæœ¬å‘å¸ƒï¼Œéœ€è¦åŒæ­¥åˆ° npm

```bash
# å…ˆæ›´æ–°ç‰ˆæœ¬
pnpm run release:patch  # æˆ– minor/major

# ç„¶åè§¦å‘npmå‘å¸ƒ
pnpm run release:npm
```

## ğŸ”§ è¯¦ç»†æ“ä½œæ­¥éª¤

### æ­¥éª¤ 1ï¼šå¼€å‘å’Œæµ‹è¯•

1. åœ¨åŠŸèƒ½åˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½
2. ç¡®ä¿ä»£ç è´¨é‡å’Œæµ‹è¯•é€šè¿‡
3. åˆå¹¶åˆ° main åˆ†æ”¯

### æ­¥éª¤ 2ï¼šç‰ˆæœ¬å‘å¸ƒ

**é€‰æ‹©å‘å¸ƒæ–¹å¼ï¼š**

#### A. æ ‡å‡†å‘å¸ƒï¼ˆä»… GitHub Releaseï¼‰

```bash
# æ ¹æ®å˜æ›´ç±»å‹é€‰æ‹©ç‰ˆæœ¬æ›´æ–°
pnpm run release:patch   # ä¿®å¤bug
pnpm run release:minor   # æ–°åŠŸèƒ½
pnpm run release:major   # é‡å¤§æ›´æ–°
```

#### B. npm å‘å¸ƒï¼ˆGitHub Release + npmï¼‰

```bash
# 1. å…ˆæ›´æ–°ç‰ˆæœ¬
pnpm run release:patch

# 2. è§¦å‘npmå‘å¸ƒ
pnpm run release:npm
```

### æ­¥éª¤ 3ï¼šéªŒè¯å‘å¸ƒ

- æŸ¥çœ‹ GitHub Releases é¡µé¢ç¡®è®¤ Release å·²åˆ›å»º
- å¦‚æœå‘å¸ƒåˆ° npmï¼Œæ£€æŸ¥ npm åŒ…é¡µé¢

## ğŸ¤– è‡ªåŠ¨åŒ–æµç¨‹è¯¦æƒ…

### è§¦å‘æ¡ä»¶

- âœ… æ¨é€åˆ°`main`åˆ†æ”¯
- âœ… `package.json`ä¸­çš„ç‰ˆæœ¬å·å‘ç”Ÿå˜åŒ–
- âœ… å¯é€šè¿‡ GitHub ç•Œé¢æ‰‹åŠ¨è§¦å‘

### è‡ªåŠ¨æ‰§è¡Œå†…å®¹

1. **ç‰ˆæœ¬æ£€æµ‹**: å¯¹æ¯”å½“å‰ç‰ˆæœ¬ä¸ä¸Šä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬
2. **æ„å»ºæµ‹è¯•**: å®‰è£…ä¾èµ–ï¼Œè¿è¡Œæµ‹è¯•ï¼Œæ„å»ºç»„ä»¶åº“
3. **ç”Ÿæˆ Changelog**: è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬æ›´æ–°è¯´æ˜
4. **åˆ›å»º Release**: åœ¨ GitHub åˆ›å»ºå¸¦æ ‡ç­¾çš„ Release
5. **npm å‘å¸ƒ**: ï¼ˆå¯é€‰ï¼‰å¦‚æœæäº¤ä¿¡æ¯åŒ…å«`[publish-npm]`

### ç”Ÿæˆçš„ Release å†…å®¹

- **æ ‡ç­¾å**: `v{version}` (å¦‚ v0.1.1)
- **å‘å¸ƒå**: `Release v{version}`
- **æè¿°**: åŒ…å« Changelog å’Œå®‰è£…æŒ‡å—
- **é™„ä»¶**: è‡ªåŠ¨é™„åŠ æºç å‹ç¼©åŒ…

## ğŸ“± ä½¿ç”¨ç¤ºä¾‹

### æ—¥å¸¸ bug ä¿®å¤

```bash
# åœ¨åŠŸèƒ½åˆ†æ”¯ä¿®å¤bugå
git checkout main
git pull origin main

# æ›´æ–°è¡¥ä¸ç‰ˆæœ¬å¹¶å‘å¸ƒ
pnpm run release:patch

# è‡ªåŠ¨æ‰§è¡Œï¼šç‰ˆæœ¬ 0.1.0 â†’ 0.1.1ï¼Œæ¨é€ä»£ç ï¼Œåˆ›å»ºGitHub Release
```

### æ–°åŠŸèƒ½å‘å¸ƒ

```bash
# æ–°åŠŸèƒ½å¼€å‘å®Œæˆå
pnpm run release:minor

# è‡ªåŠ¨æ‰§è¡Œï¼šç‰ˆæœ¬ 0.1.1 â†’ 0.2.0ï¼Œæ¨é€ä»£ç ï¼Œåˆ›å»ºGitHub Release
```

### æ­£å¼ç‰ˆæœ¬å‘å¸ƒåˆ° npm

```bash
# é‡å¤§ç‰ˆæœ¬æ›´æ–°
pnpm run release:major  # 0.2.0 â†’ 1.0.0

# åŒæ—¶å‘å¸ƒåˆ°npm
pnpm run release:npm    # è§¦å‘npmå‘å¸ƒæµç¨‹
```

## ğŸ” Release é¡µé¢ç¤ºä¾‹

å‘å¸ƒåï¼Œæ‚¨å¯ä»¥åœ¨ä»¥ä¸‹åœ°å€æŸ¥çœ‹ Releaseï¼š
`https://github.com/rokuko/cloudstack-design/releases`

æ¯ä¸ª Release å°†åŒ…å«ï¼š

- ğŸ“ è‡ªåŠ¨ç”Ÿæˆçš„ Changelog
- ğŸ“¦ å®‰è£…å‘½ä»¤
- ğŸ”— æºç ä¸‹è½½é“¾æ¥
- ğŸ·ï¸ ç‰ˆæœ¬æ ‡ç­¾

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ Changelog

å¦‚æœéœ€è¦è‡ªå®šä¹‰ Changelogï¼Œå¯ä»¥åœ¨å‘å¸ƒå‰æ‰‹åŠ¨ç¼–è¾‘ï¼š

```bash
# æ›´æ–°ç‰ˆæœ¬ä½†ä¸æ¨é€
npm version patch --no-git-tag-version

# ç¼–è¾‘CHANGELOG.mdæ–‡ä»¶
# ç„¶åæ‰‹åŠ¨æ¨é€
git add .
git commit -m "chore: release v0.1.1"
git tag v0.1.1
git push && git push --tags
```

### npm Token é…ç½®

è¦å¯ç”¨è‡ªåŠ¨ npm å‘å¸ƒï¼Œéœ€è¦åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­é…ç½®ï¼š

1. è¿›å…¥ GitHub ä»“åº“ â†’ Settings â†’ Secrets and variables â†’ Actions
2. æ·»åŠ  Secretï¼š`NPM_TOKEN`
3. å€¼ä¸ºæ‚¨çš„ npm è®¿é—®ä»¤ç‰Œ

### ä¿®æ”¹è§¦å‘æ¡ä»¶

ç¼–è¾‘ `.github/workflows/release.yml` æ–‡ä»¶ä»¥è‡ªå®šä¹‰ï¼š

- è§¦å‘åˆ†æ”¯
- å‘å¸ƒæ¡ä»¶
- æ„å»ºæ­¥éª¤

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Release æ²¡æœ‰åˆ›å»º**

   - æ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦çœŸçš„å‘ç”Ÿäº†å˜åŒ–
   - æŸ¥çœ‹ GitHub Actions æ—¥å¿—

2. **npm å‘å¸ƒå¤±è´¥**

   - ç¡®è®¤ NPM_TOKEN å·²æ­£ç¡®é…ç½®
   - æ£€æŸ¥åŒ…åæ˜¯å¦å·²è¢«å ç”¨

3. **ç‰ˆæœ¬å†²çª**
   - ç¡®ä¿æœ¬åœ°ä»£ç æ˜¯æœ€æ–°çš„
   - è§£å†³åˆå¹¶å†²çªåé‡æ–°å‘å¸ƒ

### æ‰‹åŠ¨å›æ»š

```bash
# åˆ é™¤é”™è¯¯çš„æ ‡ç­¾
git tag -d v0.1.1
git push origin :refs/tags/v0.1.1

# åœ¨GitHubåˆ é™¤å¯¹åº”çš„Release
# é‡æ–°å‘å¸ƒæ­£ç¡®ç‰ˆæœ¬
```

## ğŸ“ˆ æœ€ä½³å®è·µ

1. **ç‰ˆæœ¬è¯­ä¹‰åŒ–**ï¼šéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

   - `patch`: ä¿®å¤ bug
   - `minor`: æ–°å¢åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
   - `major`: é‡å¤§å˜æ›´ï¼ˆå¯èƒ½ä¸å…¼å®¹ï¼‰

2. **æäº¤ä¿¡æ¯è§„èŒƒ**ï¼š

   ```
   feat: æ·»åŠ æ–°çš„Buttonç»„ä»¶å˜ä½“
   fix: ä¿®å¤Tableç»„ä»¶æ’åºbug
   docs: æ›´æ–°APIæ–‡æ¡£
   ```

3. **å‘å¸ƒé¢‘ç‡**ï¼š

   - ä¿®å¤ bugï¼šåŠæ—¶å‘å¸ƒ patch ç‰ˆæœ¬
   - æ–°åŠŸèƒ½ï¼šç§¯ç´¯åå‘å¸ƒ minor ç‰ˆæœ¬
   - é‡å¤§æ›´æ–°ï¼šè°¨æ…å‘å¸ƒ major ç‰ˆæœ¬

4. **æµ‹è¯•éªŒè¯**ï¼š
   - å‘å¸ƒå‰å……åˆ†æµ‹è¯•
   - æ£€æŸ¥ Storybook å±•ç¤º
   - éªŒè¯ TypeScript ç±»å‹å®šä¹‰

---

ğŸ‰ **ç°åœ¨æ‚¨çš„ç»„ä»¶åº“å·²å…·å¤‡å®Œå…¨è‡ªåŠ¨åŒ–çš„å‘å¸ƒæµç¨‹ï¼**
